{"version":3,"sources":["assets/images/UserLogo.png","assets/images/star.png","assets/images/iconSidebar.png","reducers/session.js","reducers/rooms.js","reducers/room.js","reducers/index.js","store/index.js","components/NotFound/index.js","components/Navbar/index.js","api/index.js","actions/rooms.js","components/RoomListItem/index.js","components/NewRoomForm/index.js","containers/Home/index.js","actions/room.js","actions/session.js","components/Input/index.js","components/LoginForm/index.js","containers/Login/index.js","components/SignupAvatars/index.js","components/SignupForm/index.js","containers/Signup/index.js","components/Avatar/index.js","components/Message/index.js","components/MessageList/index.js","components/MessageForm/index.js","components/RoomNavbar/index.js","components/RoomSidebar/index.js","containers/Room/index.js","components/Sidebar/index.js","containers/App/index.js","index.js"],"names":["module","exports","__webpack_require__","p","initialState","isAuthenticated","willAuthenticate","currentUser","socket","all","currentUserRooms","require","channel","currentRoom","messages","presentUsers","loadingOlderMessages","pagination","total_pages","total_entries","page_size","page_number","rootReducer","combineReducers","form","session","state","arguments","length","undefined","action","console","log","type","Object","objectSpread","response","data","rooms","concat","toConsumableArray","room","id","reverse","message","store","createStore","applyMiddleware","thunk","NotFound","react_default","a","createElement","style","margin","textAlign","Link","to","styles","StyleSheet","create","navbar","display","alignItems","padding","height","background","boxShadow","link","color","fontSize","fontWeight",":hover","textDecoration",":focus","Navbar","className","css","API","process","headers","token","JSON","parse","localStorage","getItem","Accept","Content-Type","Authorization","parseResponse","json","then","ok","Promise","reject","api","fetch","_fetch","_x","apply","this","toString","url","params","query","keys","map","k","encodeURIComponent","join","queryString","method","post","body","stringify","patch","delete","joinRoom","roomId","history","dispatch","push","RoomListItem","_ref","currentUserRoomIds","onRoomJoin","isJoined","includes","key","justifyContent","marginBottom","marginRight","name","onClick","disabled","NewRoomForm","handleSubmit","_this","props","onSubmit","_this$props","submitting","Field","placeholder","component","Component","reduxForm","validate","values","errors","card","maxWidth","Home","handleNewRoomSubmit","createRoom","handleRoomJoin","fetchRooms","_this2","components_RoomListItem","flex","components_Navbar","components_NewRoomForm","renderRooms","connect","syncPresentUsers","presences","Presence","list","slicedToArray","metas","user","WEBSOCKET_URL","replace","setCurrentUser","userId","setItem","meta","Socket","logger","kind","msg","connectToSocket","Input","input","label","htmlFor","assign","touched","error","LoginForm","email","password","Login","componentDidMount","handleLogin","login","components_LoginForm","reset","SignupAvatars","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleClick","e","currentTarget","src","isSelected","avatars","avatar","indexOf","SignupForm","image","addAvatar","setState","src_components_SignupAvatars","username","Signup","handleSignup","signup","src_components_SignupForm","withRouter","Avatar","_ref$size","size","md5","class","alt","width","borderRadius","Message","_ref$message","text","inserted_at","src_components_Avatar","lineHeight","moment","format","marginTop","MessageList","checkShouldScroll","stayScrolledElem","scrollTop","scrollHeight","clientHeight","scrollToBottom","messagesEnd","scrollIntoView","behavior","block","renderMessages","src_components_Message","day","dayGroups","groupBy","days","mapKeys","value","date","today","yesterday","subtract","ref","c","float","clear","el","renderDays","MessageForm","autoComplete","RoomNavbar","users","star","UserLogo","RoomSidebar","handleChannelClick","roomName","roomList","onRoomClick","giphy","Room","handleLoadMore","loadOlderMessages","match","last_seen_id","handleMessageCreate","symbol","charAt","createMessage","substring","random","res","images","original","isLoading","connectToChannel","prevProps","leaveChannel","moreMessages","minWidth","src_components_RoomSidebar","flexDirection","src_components_RoomNavbar","src_components_MessageList","onLoadMore","messageList","src_components_MessageForm","on","syncState","diff","syncDiff","receive","leave","resolve","catch","sidebar","position","settingsImg","activeLink",":after","top","bottom","left","borderTopRightRadius","borderBottomRightRadius","content","badge","logoutButton","border","cursor","Sidebar","_ref2","router","onLogoutClick","iconSidebar","App","handleLogout","logout","authenticate","unauthenticate","BrowserRouter","components_Sidebar","Route","exact","path","Switch","removeItem","window","location","render","es","containers_App","document","getElementById"],"mappings":"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","file":"static/js/main.97ba41be.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/star.c42c34a7.png\";","module.exports = __webpack_public_path__ + \"static/media/iconSidebar.cb272010.png\";","const initialState = {\n  isAuthenticated: false,\n  willAuthenticate: true,\n  currentUser: {},\n  socket: null,\n};\n\nexport default function (state = initialState, action) {\n  console.log(action.type)\n  switch (action.type) {\n    case 'AUTHENTICATION_REQUEST':\n      return {\n        ...state,\n        willAuthenticate: true,\n      };\n    case 'AUTHENTICATION_SUCCESS':\n      return {\n        ...state,\n        willAuthenticate: false,\n        isAuthenticated: true,\n        currentUser: action.response.data,\n      };\n    case 'AUTHENTICATION_FAILURE':\n      return {\n        ...state,\n        willAuthenticate: false,\n      };\n    case 'LOGOUT':\n      return {\n        ...state,\n        willAuthenticate: false,\n        isAuthenticated: false,\n        currentUser: {},\n        socket: null,\n      };\n    case 'SOCKET_CONNECTED':\n      return {\n        ...state,\n        socket: action.socket,\n      };\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  all: [],\n  currentUserRooms: [],\n};\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case 'FETCH_ROOMS_SUCCESS':\n      return {\n        ...state,\n        all: action.response.data,\n      };\n    case 'FETCH_USER_ROOMS_SUCCESS':\n      return {\n        ...state,\n        currentUserRooms: action.response.data,\n      };\n    case 'CREATE_ROOM_SUCCESS':\n      return {\n        ...state,\n        all: [\n          action.response.data,\n          ...state.all,\n        ],\n        currentUserRooms: [\n          ...state.currentUserRooms,\n          action.response.data,\n        ],\n      };\n    case 'ROOM_JOINED':\n      return {\n        ...state,\n        currentUserRooms: [\n          ...state.currentUserRooms,\n          action.response.data,\n        ],\n      };\n    default:\n      return state;\n  }\n}\n","const JSON = require('circular-json');\n\nconst initialState = {\n  channel: null,\n  currentRoom: {},\n  messages: [],\n  presentUsers: [],\n  loadingOlderMessages: false,\n  pagination: {\n    total_pages: 0,\n    total_entries: 0,\n    page_size: 0,\n    page_number: 0,\n  },\n};\n\nexport default function (state = initialState, action) {\n  console.log(\"REDUE >>>> \" + state.currentRoom.id)\n  switch (action.type) {\n    case 'ROOM_CONNECTED_TO_CHANNEL':\n      return {\n        ...state,\n        channel: action.channel,\n        currentRoom: action.response.room,\n        messages: action.response.messages.reverse(),\n        pagination: action.response.pagination,\n      };\n    case 'USER_LEFT_ROOM':\n      return initialState;\n    case 'MESSAGE_CREATED':\n      return {\n        ...state,\n        messages: [\n          ...state.messages,\n          action.message,\n        ],\n      };\n    case 'ROOM_PRESENCE_UPDATE':\n    console.log(\"Room presnce update\");\n      return {\n        ...state,\n        presentUsers: action.presentUsers,\n      };\n    case 'FETCH_MESSAGES_REQUEST':\n      return {\n        ...state,\n        loadingOlderMessages: true,\n      };\n    case 'FETCH_MESSAGES_SUCCESS':\n      return {\n        ...state,\n        messages: [\n          ...action.response.data.reverse(),\n          ...state.messages,\n        ],\n        pagination: action.response.pagination,\n        loadingOlderMessages: false,\n      };\n    case 'FETCH_MESSAGES_FAILURE':\n      return {\n        ...state,\n        loadingOlderMessages: false,\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport { reducer as form } from 'redux-form';\nimport session from './session';\nimport rooms from './rooms';\nimport room from './room';\n\nconst rootReducer = combineReducers({\n  form,\n  session,\n  rooms,\n  room\n});\n\nexport default function (state, action) {\n  if (action.type === 'LOGOUT') {\n    return rootReducer(undefined, action);\n  }\n  return rootReducer(state, action);\n}\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducers from '../reducers';\n\n// Redux store.\n// Returns state from reducers\nconst store = createStore(\n  reducers,\n  applyMiddleware(thunk)\n);\nexport default store;\n","// @flow\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst NotFound = () =>\n  <div style={{ margin: '2rem auto', textAlign: 'center' }}>\n    <p>Page not found</p>\n    <p><Link to=\"/\">Go to the home page →</Link></p>\n  </div>;\n\nexport default NotFound;\n","// @flow\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { css, StyleSheet } from 'aphrodite';\n\nconst styles = StyleSheet.create({\n  navbar: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: '0 1rem',\n    height: '70px',\n    background: '#fff',\n    boxShadow: '0 1px 1px rgba(0,0,0,.1)',\n  },\n\n  link: {\n    color: '#555459',\n    fontSize: '22px',\n    fontWeight: 'bold',\n    ':hover': {\n      textDecoration: 'none',\n    },\n    ':focus': {\n      textDecoration: 'none',\n    },\n  },\n});\n\nconst Navbar = () =>\n  <nav className={css(styles.navbar)}>\n    <Link to=\"/\" className={css(styles.link)}>Slackclone</Link>\n  </nav>;\n\nexport default Navbar;\n","const API = process.env.REACT_APP_API_URL;\n\nfunction headers() {\n  const token = JSON.parse(localStorage.getItem('token'));\n\n  return {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    Authorization: `Bearer: ${token}`,\n  };\n}\n\nfunction parseResponse(response) {\n  return response.json().then((json) => {\n    if (!response.ok) {\n      return Promise.reject(json);\n    }\n    return json;\n  });\n}\n\nfunction queryString(params) {\n  const query = Object.keys(params)\n                      .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`)\n                      .join('&');\n  return `${query.length ? '?' : ''}${query}`;\n}\n\nexport default {\n  fetch(url, params = {}) {\n    return fetch(`${API}${url}${queryString(params)}`, {\n      method: 'GET',\n      headers: headers(),\n    })\n    .then(parseResponse);\n  },\n\n  post(url, data) {\n    const body = JSON.stringify(data);\n\n    return fetch(`${API}${url}`, {\n      method: 'POST',\n      headers: headers(),\n      body,\n    })\n    .then(parseResponse);\n  },\n\n  patch(url, data) {\n    const body = JSON.stringify(data);\n\n    return fetch(`${API}${url}`, {\n      method: 'PATCH',\n      headers: headers(),\n      body,\n    })\n    .then(parseResponse);\n  },\n\n  delete(url) {\n    return fetch(`${API}${url}`, {\n      method: 'DELETE',\n      headers: headers(),\n    })\n    .then(parseResponse);\n  },\n};\n","import api from '../api';\n\nexport function fetchRooms() {\n  return dispatch => api.fetch('/rooms')\n    .then((response) => {\n      dispatch({ type: 'FETCH_ROOMS_SUCCESS', response });\n    });\n}\n\nexport function fetchUserRooms(userId) {\n  return dispatch => api.fetch(`/users/${userId}/rooms`)\n    .then((response) => {\n      dispatch({ type: 'FETCH_USER_ROOMS_SUCCESS', response });\n    });\n}\n\nexport function createRoom(data, history) {\n  return dispatch => api.post('/rooms', data)\n    .then((response) => {\n      dispatch({ type: 'CREATE_ROOM_SUCCESS', response });\n      history.push(`/r/${response.data.id}`);\n    });\n}\n\nexport function joinRoom(roomId, history) {\n  return dispatch => api.post(`/rooms/${roomId}/join`)\n    .then((response) => {\n      dispatch({ type: 'ROOM_JOINED', response });\n      history.push(`/r/${response.data.id}`);\n    });\n}\n","import React from 'react';\n\ntype Props = {\n  room: {\n    id: number,\n    name: string,\n  },\n  currentUserRoomIds: Array,\n  onRoomJoin: () => void,\n}\n\nconst RoomListItem = ({ room, currentUserRoomIds, onRoomJoin }: Props) => {\n  const isJoined = currentUserRoomIds.includes(room.id);\n  return (\n    <div key={room.id} style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>\n      <span style={{ marginRight: '8px' }}>{room.name}</span>\n      <button\n        onClick={() => onRoomJoin(room.id)}\n        className=\"btn btn-sm\"\n        disabled={isJoined}\n      >\n        {isJoined ? 'Joined' : 'Join'}\n      </button>\n    </div>\n  );\n};\n\nexport default RoomListItem;\n","// @flow\nimport React, { Component } from 'react';\nimport { Field, reduxForm } from 'redux-form';\n\ntype Props = {\n  handleSubmit: () => void,\n  onSubmit: () => void,\n  submitting: boolean,\n}\n\nclass NewRoomForm extends Component {\n  props: Props\n\n  handleSubmit = data => this.props.onSubmit(data);\n\n  render() {\n    const { handleSubmit, submitting } = this.props;\n\n    return (\n      <form onSubmit={handleSubmit(this.handleSubmit)}>\n        <div className=\"input-group\">\n          <Field\n            name=\"name\"\n            type=\"text\"\n            placeholder=\"Name\"\n            component=\"input\"\n            className=\"form-control\"\n          />\n          <div className=\"input-group-btn\">\n            <button type=\"submit\" className=\"btn btn-primary\" disabled={submitting}>\n              {submitting ? 'Saving...' : 'Submit'}\n            </button>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n\nconst validate = (values) => {\n  const errors = {};\n  if (!values.name) {\n    errors.name = 'Required';\n  } else if (values.name.length > 24) {\n    errors.name = 'Must be less than 18 characters'\n  }\n  return errors;\n};\n\nexport default reduxForm({\n  form: 'newRoom',\n  validate,\n})(NewRoomForm);\n","// @flow\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Navbar from '../../components/Navbar';\nimport { fetchRooms, createRoom, joinRoom } from '../../actions/rooms';\nimport { css, StyleSheet } from 'aphrodite';\nimport RoomListItem from '../../components/RoomListItem';\nimport NewRoomForm from '../../components/NewRoomForm';\n\n\nconst styles = StyleSheet.create({\n  card: {\n    maxWidth: '500px',\n    padding: '3rem 4rem',\n    margin: '2rem auto',\n  },\n});\n\ntype Room = {\n  id: number,\n  name: string,\n}\n\ntype Props = {\n  rooms: Array<Room>,\n  currentUserRooms: Array<Room>,\n  fetchRooms: () => void,\n  createRoom: () => void,\n  joinRoom: () => void,\n}\n\nclass Home extends Component {\n\n\n  componentDidMount() {\n    this.props.fetchRooms();\n  }\n\n  props: Props\n\n  handleNewRoomSubmit = data => this.props.createRoom(data, this.props.history);\n\n  handleRoomJoin = roomId => this.props.joinRoom(roomId, this.props.history);\n\n  renderRooms() {\n    const currentUserRoomIds = [];\n    this.props.currentUserRooms.map(room => currentUserRoomIds.push(room.id));\n    return this.props.rooms.map(room =>\n      <RoomListItem\n        key={room.id}\n        room={room}\n        onRoomJoin={this.handleRoomJoin}\n        currentUserRoomIds={currentUserRoomIds}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <div style={{ flex: '1' }}>\n        <Navbar />\n        <div className={`card ${css(styles.card)}`}>\n          <h3 style={{ marginBottom: '2rem', textAlign: 'center' }}>Create a new room</h3>\n          <NewRoomForm onSubmit={this.handleNewRoomSubmit} />\n        </div>\n        <div className={`card ${css(styles.card)}`}>\n          <h3 style={{ marginBottom: '2rem', textAlign: 'center' }}>Join a room</h3>\n          {this.renderRooms()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    rooms: state.rooms.all,\n    currentUserRooms: state.rooms.currentUserRooms,\n  }),\n  { fetchRooms, createRoom, joinRoom }\n)(Home);\n","import { reset } from 'redux-form';\nimport api from '../api';\nimport { Presence } from 'phoenix';\n\nconst syncPresentUsers = (dispatch, presences) => {\n  const presentUsers = [];\n  Presence.list(presences, (id, { metas: [first] }) => first.user)\n          .map(user => presentUsers.push(user));\n  dispatch({ type: 'ROOM_PRESENCE_UPDATE', presentUsers });\n};\n\nexport function connectToChannel(socket, roomId) {\n  return (dispatch) => {\n    if (!socket) { return false; }\n    const channel = socket.channel(`room:${roomId}`);\n    let presences = {};\n    channel.on('presence_state', (state) => {\n      presences = Presence.syncState(presences, state);\n      syncPresentUsers(dispatch, presences);\n    });\n\n    channel.on('presence_diff', (diff) => {\n      presences = Presence.syncDiff(presences, diff);\n      syncPresentUsers(dispatch, presences);\n    });\n\n    channel.on('message_created', (message) => {\n      dispatch({ type: 'MESSAGE_CREATED', message });\n    });\n\n    channel.join().receive('ok', (response) => {\n      dispatch({ type: 'ROOM_CONNECTED_TO_CHANNEL', response, channel });\n    });\n\n    return false;\n  };\n}\n\nexport function leaveChannel(channel) {\n  return (dispatch) => {\n    if (channel) {\n      channel.leave();\n    }\n    dispatch({ type: 'USER_LEFT_ROOM' });\n  };\n}\n\nexport function createMessage(channel, data) {\n  console.log(data)\n  return dispatch => new Promise((resolve, reject) => {\n    channel.push('new_message', data)\n      .receive('ok', () => resolve(\n        dispatch(reset('newMessage'))\n      ))\n      .receive('error', () => reject());\n  });\n}\n\nexport function loadOlderMessages(roomId, params) {\n  return (dispatch) => {\n    dispatch({ type: 'FETCH_MESSAGES_REQUEST' });\n    return api.fetch(`/rooms/${roomId}/messages`, params)\n      .then((response) => {\n        dispatch({ type: 'FETCH_MESSAGES_SUCCESS', response });\n      })\n      .catch(() => {\n        dispatch({ type: 'FETCH_MESSAGES_FAILURE' });\n      });\n  };\n}\n","import { reset } from 'redux-form';\nimport { Socket } from 'phoenix';\nimport api from '../api';\nimport { fetchUserRooms } from './rooms';\nimport { connectToChannel } from './room';\n\nconst API_URL = process.env.REACT_APP_API_URL;\nconst WEBSOCKET_URL = API_URL.replace(/(https|http)/, 'ws').replace('/api', '');\n\n\nfunction connectToSocket(dispatch) {\n  const token = JSON.parse(localStorage.getItem('token'));\n  const socket = new Socket(`${WEBSOCKET_URL}/socket`, {\n    params: { token },\n    logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data); }\n  });\n  socket.connect();\n  dispatch({ type: 'SOCKET_CONNECTED', socket });\n}\n\nfunction setCurrentUser(dispatch, response) {\n  localStorage.setItem('token', JSON.stringify(response.meta.token));\n  dispatch({ type: 'AUTHENTICATION_SUCCESS', response });\n  dispatch(fetchUserRooms(response.data.id));\n  connectToSocket(dispatch);\n}\n\nexport function login(data, history) {\n  return dispatch => api.post('/sessions', data)\n    .then((response) => {\n      setCurrentUser(dispatch, response);\n      dispatch(reset('login'));\n      history.push('/r/1');\n    });\n}\n\nexport function signup(data, history) {\n  return dispatch => api.post('/users', data)\n    .then((response) => {\n      setCurrentUser(dispatch, response);\n      dispatch(reset('signup'));\n      console.log(\"AWDAWDAWD<<<<<\");\n      history.push('/');\n    });\n}\n\nexport function logout(history) {\n  return dispatch => api.delete('/sessions')\n    .then(() => {\n      localStorage.removeItem('token');\n      dispatch({ type: 'LOGOUT' });\n      window.location = \"/\";\n    });\n}\n\nexport function authenticate() {\n  return dispatch => api.post('/sessions/refresh')\n    .then((response) => {\n      setCurrentUser(dispatch, response);\n    })\n    .catch(() => {\n      localStorage.removeItem('token');\n      window.location = '/login';\n    });\n}\n\nexport const unauthenticate = () => ({ type: 'AUTHENTICATION_FAILURE' });\n","// @flow\nimport React from 'react';\n\ntype Props = {\n  input: Object,\n  label?: string,\n  type?: string,\n  placeholder?: string,\n  style?: Object,\n  meta: Object,\n}\n\nconst Input = ({ input, label, type, placeholder, style, meta }: Props) =>\n  <div style={{ marginBottom: '1rem' }}>\n    {label && <label htmlFor={input.name}>{label}</label>}\n    <input\n      {...input}\n      type={type}\n      placeholder={placeholder}\n      className=\"form-control\"\n      style={style && style}\n    />\n    {meta.touched && meta.error &&\n      <div style={{ fontSize: '85%', color: 'rgb(255,59,48)' }}>{meta.error}</div>\n    }\n  </div>;\n\nexport default Input;\n","// @flow\nimport React, { Component } from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport { Link } from 'react-router-dom';\nimport { css, StyleSheet } from 'aphrodite';\nimport Input from '../Input';\n\nconst styles = StyleSheet.create({\n  card: {\n    maxWidth: '500px',\n    padding: '3rem 4rem',\n    margin: '2rem auto',\n  },\n});\n\ntype Props = {\n  onSubmit: () => void,\n  handleSubmit: () => void,\n  submitting: boolean,\n}\n\nclass LoginForm extends Component<Props> {\n\n  handleSubmit = data => this.props.onSubmit(data);\n\n  render() {\n    const { handleSubmit, submitting } = this.props;\n\n    return (\n      <form\n        className={`card ${css(styles.card)}`}\n        onSubmit={handleSubmit(this.handleSubmit)}\n      >\n        <h3 style={{ marginBottom: '2rem', textAlign: 'center' }}>Login to Sling</h3>\n        <Field name=\"email\" type=\"text\" component={Input} placeholder=\"Email\" />\n        <Field name=\"password\" type=\"password\" component={Input} placeholder=\"Password\" />\n        <button\n          type=\"submit\"\n          disabled={submitting}\n          className=\"btn btn-block btn-primary\"\n        >\n          {submitting ? 'Logging in...' : 'Login'}\n        </button>\n        <hr style={{ margin: '2rem 0' }} />\n        <Link to=\"/signup\" className=\"btn btn-block btn-secondary\">\n          Create a new account\n        </Link>\n      </form>\n    );\n  }\n}\n\nconst validate = (values) => {\n  const errors = {};\n  if (!values.email) {\n    errors.email = 'Required';\n  }\n  if (!values.password) {\n    errors.password = 'Required';\n  }\n  return errors;\n};\n\nexport default reduxForm({\n  form: 'login',\n  validate,\n})(LoginForm);\n","// @flow\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { login } from '../../actions/session';\nimport LoginForm from '../../components/LoginForm';\nimport Navbar from '../../components/Navbar';\n\ntype Props = {\n  login: () => void,\n}\n\nclass Login extends Component {\n\n  props: Props\n\n  componentDidMount = () => {\n\n  }\n\n  handleLogin = (data) => this.props.login(data, this.props.history);\n\n  render() {\n    return (\n      <div style={{ flex: '1' }}>\n        <Navbar />\n        <LoginForm onSubmit={this.handleLogin} />\n      </div>\n    );\n  }\n}\n\n\n\nexport default connect(null, { login })(Login);\n","import React, { Component } from 'react';\nimport './index.scss';\n\nclass SignupAvatars extends Component {\n\n  constructor() {\n    super();\n    this.state={\n      isSelected: '',\n    }\n  }\n\n  handleClick = (e) => {\n    this.props.onClick(e.currentTarget.src)\n    e.currentTarget.className = \"avatar-selected\";\n  }\n\n  render() {\n    const uri = 'https://image.flaticon.com/icons/png/128/186/';\n    const avatars= ['186720', '186693', '186742', '186711', '186726', '186722', '186721', '186709', '186700', '186695', '186702', '186684', '186677', '186717', '186710', '186707'];\n    const filetype = '.png';\n\n    return(\n      <div className={\"avatar-grid\"}>\n        {avatars.map(avatar =>\n            <img key={avatars.indexOf(avatar)} src={uri + avatar + filetype} className={\"avatar\"} onClick={this.handleClick} />\n        )}\n      </div>\n    );\n  }\n\n\n}\n\nexport default SignupAvatars;\n","// @flow\nimport React, { Component } from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport { Link } from 'react-router-dom';\nimport { css, StyleSheet } from 'aphrodite';\nimport Input from '../Input';\nimport SignupAvatars from '../SignupAvatars';\nimport './index.scss';\n\nconst styles = StyleSheet.create({\n  card: {\n    maxWidth: '500px',\n    padding: '3rem 4rem',\n    margin: '2rem auto',\n  },\n});\n\ntype Props = {\n  onSubmit: () => void,\n  submitting: boolean,\n  handleSubmit: () => void,\n}\n\nclass SignupForm extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      image: \"https://f4.bcbits.com/img/a0069281785_10.jpg\",\n    };\n  }\n\n  handleSubmit = (data) => {\n    data.image = this.state.image;\n    this.props.onSubmit(data);\n  }\n\n  addAvatar = url => {\n    this.setState({image: url})\n}\n\n  render() {\n    const { handleSubmit, submitting } = this.props;\n\n    return (\n      <div className=\"login-form\">\n        <SignupAvatars onClick={this.addAvatar} />\n      <form\n        className={\"card\"}\n        onSubmit={handleSubmit(this.handleSubmit)}\n      >\n        <h3 style={{ marginBottom: '2rem', textAlign: 'center' }}>Create an account</h3>\n        <Field\n          name=\"username\"\n          type=\"text\"\n          component={Input}\n          placeholder=\"Username\"\n          className=\"form-control\"\n        />\n        <Field\n          name=\"email\"\n          type=\"email\"\n          component={Input}\n          placeholder=\"Email\"\n          className=\"form-control\"\n        />\n        <Field\n          name=\"password\"\n          type=\"password\"\n          component={Input}\n          placeholder=\"Password\"\n          className=\"form-control\"\n        />\n        <button\n          type=\"submit\"\n          disabled={submitting}\n          className=\"btn btn-block btn-primary\"\n        >\n          {submitting ? 'Submitting...' : 'Sign up'}\n        </button>\n        <hr style={{ margin: '2rem 0' }} />\n        <Link to=\"/login\" className=\"btn btn-block btn-secondary\">\n          Login to your account\n        </Link>\n      </form>\n      </div>\n    );\n  }\n}\n\nconst validate = (values) => {\n  const errors = {};\n  if (!values.username) {\n    errors.username = 'Required';\n  } else if  (values.username.length > 18) {\n    errors.username = 'Required';\n  }\n  if (!values.email) {\n    errors.email = 'Required';\n  }\n  if (!values.password) {\n    errors.password = 'Required';\n  } else if (values.password.length < 6) {\n    errors.password = 'Minimum of 6 characters';\n  }\n  return errors;\n};\n\nexport default reduxForm({\n  form: 'signup',\n  validate,\n})(SignupForm);\n","// @flow\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { signup } from '../../actions/session';\nimport SignupForm from '../../components/SignupForm';\nimport Navbar from '../../components/Navbar';\nimport { withRouter } from 'react-router'\n\ntype Props = {\n  signup: () => void,\n}\n\nclass Signup extends Component {\n\n  handleSignup = data => {\n    this.props.signup(data, this.props.history);\n  }\n\n  render() {\n    return (\n      <div style={{ flex: '1' }}>\n        <Navbar />\n        <SignupForm onSubmit={this.handleSignup} />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(connect(null, { signup })(Signup));\n","// @flow\nimport React from 'react';\nimport md5 from 'md5';\nimport './index.scss';\n\ntype Props = {\n  email: string,\n  size?: number,\n  style?: Object,\n  imagesrc: string,\n  user: {},\n  image: string,\n}\n\nconst Avatar = ({ email, size = 40, style, user, image }: Props) => {\n\n  const hash = md5(email);\n  const uri = \"https://image.flaticon.com/icons/png/128/145/145867.png\";\n\n  return (\n    <img\n      class={\"avatar\"}\n      src={image}\n      alt={email}\n      style={{ width: `${size}px`, height: `${size}px`, borderRadius: '4px', ...style }}\n    />\n  );\n};\n\nexport default Avatar;\n/*\nhttps://image.flaticon.com/icons/png/128/186/186692.png\nimage.flaticon.com/icons/png/128/186/\n186720\n186693 186742 186711 186726 186722 186721 186709 186700 186695 186718 186702 186684 186677 186717 186710 186707\n */\n","// @flow\nimport React from 'react';\nimport moment from 'moment';\nimport Avatar from '../Avatar';\nimport './index.scss';\n\ntype Props = {\n  message: {\n    text: string,\n    inserted_at: string,\n    user: {\n      email: string,\n      username: string,\n      image: string,\n    },\n  }\n}\n\nconst Message = ({ message: { text, inserted_at, user } }: Props) =>\n  <div style={{ display: 'flex', marginBottom: '10px' }}>\n    <Avatar email={user.email} image={user.image} style={{ marginRight: '10px' }} />\n    <div>\n      <div style={{ lineHeight: '1.2' }}>\n        <b style={{ marginRight: '8px', fontSize: '14px' }}>{user.username}</b>\n        <time style={{ fontSize: '12px', color: 'rgb(192,192,192)' }}>{moment(inserted_at).format('h:mm A')}</time>\n      </div>\n      {text.includes(\"giphy.com/media\")?\n        <img src={text} style={{ marginTop: '10px' }}/>\n        :\n        <div class=\"message-text\">{text}</div>\n\n        }\n    </div>\n  </div>;\n\nexport default Message;\n","// @flow\nimport React, { useRef, Component } from 'react';\nimport moment from 'moment';\nimport groupBy from 'lodash/groupBy';\nimport mapKeys from 'lodash/mapKeys';\nimport Message from '../Message';\nimport './index.scss';\n\n\ntype MessageType = {\n  id: number,\n  inserted_at: string,\n}\n\ntype Props = {\n  messages: Array<MessageType>,\n}\n\nclass MessageList extends Component {\n\n  componentDidMount() {\n    this.scrollToBottom();\n  }\n\n  componentDidUpdate() {\n    this.checkShouldScroll();\n  }\n\n  checkShouldScroll = () => {\n    if (!this.stayScrolledElem) { return }\n    var a = this.stayScrolledElem.scrollTop\n    var b = this.stayScrolledElem.scrollHeight - this.stayScrolledElem.clientHeight;\n    var c = a / b;\n    let shouldScroll = (c > 0.90)\n    if (shouldScroll) {\n      this.scrollToBottom();\n    }\n  }\n\n  scrollToBottom = () => {\n    if (this.messagesEnd) {\n      this.messagesEnd.scrollIntoView({ behavior: \"auto\", block: \"end\" });\n    }\n  }\n\n  renderMessages = messages =>\n    messages.map(message => <Message key={message.id} message={message} />);\n\n\n  renderDays() {\n\n    const { messages } = this.props;\n    messages.map(message => message.day = moment(message.inserted_at).format('MMMM Do'));\n    const dayGroups = groupBy(messages, 'day');\n    const days = [];\n    mapKeys(dayGroups, (value, key) => {\n      days.push({ date: key, messages: value });\n    });\n    const today = moment().format('MMMM Do');\n    const yesterday = moment().subtract(1, 'days').format('MMMM Do');\n    return days.map(day =>\n      <div className={\"inner\"}>\n      <div key={day.date} className={\"messages-list\"} ref={c => { this.stayScrolledElem = c; }}>\n        <div className={\"daydivider\"}>\n          <span className={\"daytext\"}>\n            {day.date === today && 'Today'}\n            {day.date === yesterday && 'Yesterday'}\n            {![today, yesterday].includes(day.date) && day.date}\n          </span>\n        </div>\n        {this.renderMessages(day.messages)}\n        <div style={{ float:\"left\", clear: \"both\" }}\n             ref={(el) => { this.messagesEnd = el; }}>\n        </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className={\"messages-container\"}>\n        {this.renderDays()}\n      </div>\n    );\n  }\n}\n\nexport default MessageList;\n","// @flow\nimport React, { Component } from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport './index.scss';\n\n\ntype Props = {\n  onSubmit: () => void,\n  handleSubmit: () => void,\n  submitting: boolean,\n  room: string,\n}\n\nclass MessageForm extends Component {\n  props: Props\n\n  handleSubmit = data => this.props.onSubmit(data);\n\n  render() {\n    const { handleSubmit, submitting, room } = this.props;\n    return (\n      <form onSubmit={handleSubmit(this.handleSubmit)} className={\"message-form\"}>\n        <div className=\"input-group\">\n          <Field\n            autoComplete=\"off\"\n            name=\"text\"\n            type=\"text\"\n            component=\"input\"\n            className={\"form-control\"}\n            placeholder={\"Message \" + room}\n          />\n          <div className=\"input-group-btn\">\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\n\nconst validate = (values) => {\n  const errors = {};\n  if (!values.text) {\n    errors.text = 'Required';\n  }\n  return errors;\n};\n\nexport default reduxForm({\n  form: 'newMessage',\n  validate,\n})(MessageForm);\n","// @flow\nimport React from 'react';\nimport './index.scss';\nimport UserLogo from '../../assets/images/UserLogo.png';\nimport star from '../../assets/images/star.png';\nimport moment from 'moment';\nimport groupBy from 'lodash/groupBy';\nimport mapKeys from 'lodash/mapKeys';\n\ntype Props = {\n  room: {\n    name: string,\n  },\n  users: Array<User>,\n}\n\nconst RoomNavbar = ({ room, users }: Props) =>\n  <nav className={\"room-navbar\"}>\n    <h3># {room.name}</h3>\n    <div className={\"navbar-subtitle\"}>\n      <img src={star}/>\n        <span> | </span>\n        <img src={UserLogo}/>\n        <h4 className={\"user-count\"}>{users.length}</h4>\n        <span> | </span>\n    </div>\n    <div className={\"navbar-day\"}></div>\n  </nav>;\n\nexport default RoomNavbar;\n","// @flow\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport './index.scss';\nimport { joinRoom } from '../../actions/rooms';\n\n\ntype User = {\n  id: number,\n  username: string,\n}\n\ntype Props = {\n  room: {\n    id: number,\n    name: string,\n  },\n  currentUser: {\n    username: string,\n  },\n  currentRoom: {},\n  presentUsers: Array<User>,\n  currentUserRoomIds: Array,\n  roomList: Array<Room>,\n  joinRoom: () => void,\n}\n\nclass RoomSidebar extends Component {\n\n  handleChannelClick = () => {\n    this.props.history.push('/');\n  }\n\nrender() {\n  const {room ,currentUser, roomName, presentUsers, currentUserRoomIds,roomList, onRoomJoin, onRoomClick } = this.props;\n  return(\n      <div className={\"room-sidebar\"}>\n        <div className={\"header\"}>\n          <h1>Slack Clone</h1>\n          <h2>{currentUser.username}</h2>\n        </div>\n        <div className={\"channels\"}>\n        <h2 onClick={this.handleChannelClick}>Channels</h2>\n        <ul>\n          {roomList.map(room =>\n            <li key={room.id} id={room.id} className={(this.props.room.id === room.id)? \"selected\" : ''} onClick={this.handleClick}>\n              <Link to={`/r/${room.id}` }>\n                  # {room.name}\n              </Link>\n            </li>\n          )}\n        </ul>\n        </div>\n        <div className={\"users\"}>\n          <h2>Users</h2>\n            <ul>\n              {presentUsers.map(user =>\n                <li key={user.id}>\n                  <span>{user.username} </span>\n                </li>\n              )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    room: state.room.currentRoom,\n  }),\n  {joinRoom})(RoomSidebar);\n","// @flow\nimport React, { Component }  from 'react';\nimport ReactDOM from 'react';\nimport { connect } from 'react-redux';\nimport { connectToChannel, leaveChannel, createMessage, loadOlderMessages } from '../../actions/room';\nimport MessageList from '../../components/MessageList';\nimport MessageForm from '../../components/MessageForm';\nimport RoomNavbar from '../../components/RoomNavbar';\nimport RoomSidebar from '../../components/RoomSidebar';\nvar giphy = require('giphy-api')('6pnpv5D6GRVm8ZbfI6I5PQ7WRmXm4IMc');\n\ntype MessageType = {\n  id: number,\n}\n\ntype Props = {\n  socket: any,\n  channel: any,\n  room: Object,\n  params: {\n    id: number,\n  },\n  connectToChannel: () => void,\n  leaveChannel: () => void,\n  createMessage: () => void,\n  messages: Array<MessageType>,\n  presentUsers: Array,\n  currentUser: Object,\n  loadingOlderMessages: boolean,\n  currentUserRooms: Array<Room>,\n  currentUserRoomIds: Array,\n  pagination: {\n    total_pages: number,\n    total_entries: number,\n    page_size: number,\n    page_number: number,\n  },\n  loadOlderMessages: () => void,\n  onRoomJoin: () => void,\n}\n\nclass Room extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      isLoading: true,\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.socket === null) { return }\n    this.props.connectToChannel(this.props.socket, this.props.match.params.id);\n  }\n\n  componentDidUpdate(prevProps) {\n    // If user refreshes screen, need to get messages again..\n    if (prevProps.socket === null) {\n      this.props.connectToChannel(this.props.socket, this.props.match.params.id);\n    }\n    // If browser has changed channels, connect to new channel..\n    if (prevProps.match.params.id !== this.props.match.params.id) {\n      this.props.leaveChannel(this.props.channel);\n      this.props.connectToChannel(prevProps.socket, this.props.match.params.id);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.leaveChannel(this.props.channel);\n  }\n\n  handleLoadMore = () =>\n    this.props.loadOlderMessages(\n      this.props.match.params.id,\n      { last_seen_id: this.props.messages[0].id }\n    )\n\n  handleMessageCreate = (data) => {\n    let channel = this.props.channel;\n    var symbol = data.text;\n    if (symbol.charAt(0) !== '/') {\n      this.props.createMessage(channel, data);\n    } else {\n      symbol = symbol.substring(6);\n      let props = this.props;\n      giphy.random(symbol).then(function (res) {\n        if (res.data.images) {\n          data.text = res.data.images.original.url\n          props.createMessage(channel, data);\n        }\n      });\n    }\n  //  this.messageList.scrollToBottom();\n  }\n\n  render() {\n    const moreMessages = this.props.pagination.total_pages > this.props.pagination.page_number;\n    const { isLoading } = this.state;\n\n    return (\n      <div style={{ display: 'flex', height: '100vh', width: '90%', minWidth: '400px'}}>\n        <RoomSidebar\n          room={this.props.room}\n          roomList={this.props.currentUserRooms}\n          currentUser={this.props.currentUser}\n          presentUsers={this.props.presentUsers}\n          onRoomClick={this.handleRoomJoin}\n          history={this.props.history}\n        />\n      <div className={\"message-window\"} style={{ display: 'flex', flexDirection: 'column', width: \"100%\" }}>\n          <RoomNavbar\n            room={this.props.room}\n            users={this.props.presentUsers}\n            />\n          {!this.props.channel?\n            <div></div>\n              :\n            <MessageList\n              moreMessages={moreMessages}\n              currentUser={this.props.currentUser}\n              messages={this.props.messages}\n              onLoadMore={this.handleLoadMore}\n              ref={(c) => { this.messageList = c; }}\n              loadingOlderMessages={this.props.loadingOlderMessages}\n            />\n           }\n          <MessageForm onSubmit={this.handleMessageCreate} room={this.props.room.name? this.props.room.name : \"unavailable\" } />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    room: state.room.currentRoom,\n    socket: state.session.socket,\n    channel: state.room.channel,\n    messages: state.room.messages,\n    presentUsers: state.room.presentUsers,\n    currentUser: state.session.currentUser,\n    pagination: state.room.pagination,\n    loadingOlderMessages: state.room.loadingOlderMessages,\n    currentUserRooms: state.rooms.currentUserRooms\n  }),\n  { connectToChannel, leaveChannel, createMessage, loadOlderMessages }\n)(Room);\n","// @flow\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { css, StyleSheet } from 'aphrodite';\nimport iconSidebar from '../../assets/images/iconSidebar.png';\n\n\nconst styles = StyleSheet.create({\n  sidebar: {\n    display: 'flex',\n    flexDirection: 'column',\n    background: 'rgb(38,0,39)',\n  },\n\n  link: {\n    position: 'relative',\n    display: 'flex',\n    width: '65px',\n    color: 'rgba(255,255,255,.6)',\n    ':hover': {\n      textDecoration: 'none',\n    },\n    ':focus': {\n      textDecoration: 'none',\n    },\n  },\n\n  settingsImg: {\n    width: \"inherit\",\n    borderRadius: \"10%\",\n  },\n\n\n  activeLink: {\n    color: '#fff',\n    ':after': {\n      position: 'absolute',\n      top: '12px',\n      bottom: '12px',\n      left: '0',\n      width: '3px',\n      background: 'rgba(255,255,255,.2)',\n      borderTopRightRadius: '3px',\n      borderBottomRightRadius: '3px',\n      content: '\"\"',\n    },\n  },\n\n  badge: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '45px',\n    height: '45px',\n    margin: '12px auto',\n    fontSize: '20px',\n    background: 'rgba(255,255,255,.2)',\n    borderRadius: '5px',\n  },\n\n  logoutButton: {\n    padding: '0',\n    background: 'transparent',\n    border: '0',\n    cursor: 'pointer',\n  },\n});\n\ntype Room = {\n  id: number,\n  name: string,\n}\n\ntype RoomLinkProps = {\n  room: Room\n}\n\nconst RoomLink = ({ room }: RoomLinkProps) =>\n  <Link to={`/r/${room.id}`} className={css(styles.link)}>\n    <div className={css(styles.badge)}>\n    </div>\n  </Link>;\n\ntype Props = {\n  rooms: Array<Room>,\n  router: Object,\n  onLogoutClick: () => void,\n}\n\nconst Sidebar = ({ rooms, router, onLogoutClick }: Props) =>\n  <div className={css(styles.sidebar)}>\n    <Link\n      to=\"/\"\n      className={css(styles.link)}\n    >\n      <div className={css(styles.badge)}>\n        <img src={iconSidebar} className={css(styles.settingsImg)}>\n        </img>\n        <span className=\"fa fa-plus\" />\n      </div>\n    </Link>\n    <div style={{ flex: '1' }} />\n    <button\n      onClick={() => onLogoutClick(router)}\n      className={css(styles.link, styles.logoutButton)}\n    >\n      <div className={css(styles.badge)}>\n        <img src=\"http://www.logospng.com/images/61/iconfinder-iconico-by-nicolas-rubio-61578.png\" className={css(styles.settingsImg)} />\n        <span className=\"fa fa-sign-out\" />\n      </div>\n    </button>\n  </div>;\n\nexport default Sidebar;\n","// @flow\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport NotFound from '../../components/NotFound';\nimport Home from '../Home';\nimport Login from '../Login';\nimport Signup from '../Signup';\nimport Room from '../Room';\nimport { connect } from 'react-redux';\nimport { authenticate, unauthenticate, logout } from '../../actions/session';\nimport Sidebar from '../../components/Sidebar';\n\n\ntype Props = {\n  authenticate: () => void,\n  unauthenticate: () => void,\n  isAuthenticated: boolean,\n  willAuthenticate: boolean,\n  logout: () => void,\n  currentUserRooms: Array,\n}\n\nclass App extends Component {\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      this.props.authenticate();\n    } else {\n      this.props.unauthenticate();\n    }\n  }\n\n  handleLogout = router => this.props.logout(router);\n\n  render() {\n    const { isAuthenticated, currentUserRooms } = this.props;\n    console.log(\"MEEEE \" + isAuthenticated);\n     return (\n      <Router>\n          <div style={{ display: 'flex', flex: '1', width: '100%'}}>\n          {isAuthenticated && <Sidebar\n                        rooms={currentUserRooms}\n                        onLogoutClick={this.handleLogout}\n                      />}\n           <Route exact path=\"/\" component={isAuthenticated? Home : Login} />\n           <Route exact path=\"/signup\" component={Signup} />\n           <Route exact path=\"/login\" component={Login} />\n           <Route path=\"/r/:id\" component={isAuthenticated? Room : Login} />\n           <Switch component={NotFound} />\n           </div>\n       </Router>\n     );\n   }\n }\n\n export default connect(\n   state => ({\n     isAuthenticated: state.session.isAuthenticated,\n     willAuthenticate: state.session.willAuthenticate,\n     currentUserRooms: state.rooms.currentUserRooms,\n   }),\n   { authenticate, unauthenticate, logout }\n )(App);\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport App from './containers/App';\nimport './index.scss';\n\nrender(\n<Provider store={store}>\n  <App class=\"root\" />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}